package main

import (
	"encoding/hex"
	"encoding/json"
	"fmt"
	cardano "sidechain/x/clients/cardano"

	"github.com/fxamacker/cbor/v2"
)

func unpackVerifyBlockOutput(s string) cardano.VerifyBlockOutput {
	data, _ := hex.DecodeString(s)
	var vOutput cardano.VerifyBlockOutput
	err2 := cbor.Unmarshal(data, &vOutput)
	if err2 != nil {
		fmt.Println("error:", err2)
	}
	return vOutput
}

func main() {
	blockInput := cardano.BlockHexCbor{
		HeaderCbor:    "828a1a001984db1a025034805820fc493a04edbd59962fe46b978ad3e7fa6141b8c1d2ae6a5ebf7ce75a069df18d5820545fc09bd41a04efd719877044ddd763cde3335260d742f8ca8e835824f31d1258204290cf8b693cd83b04905ca77d79501881b3378186c6bb903b02a89f02555a0d8258400b0e222ebc07ff6a5b249965b154f8775140d4cbb424ee5e39a1d32bae0163556ecb901423d7cc0b76e27a7be8107ce438bf48ada6ecbff8981e6f1a78fcd9a758503a87c3f545893c4b3528d30522b5620bd0efe6ca56436df7c9b4aee18115a15a3cfd6c31ab601239434c845cc06b703703c72f1f36cd4ceaca70cd5877e7b04f22df03a8547d79ed3358267a8414740e19155b5820dec6d4bc25aab017336da2b01f211bb1b1fd75adce88819206bf92d5a0f70543845820399f91682fd35f12aa175a2a6e7148cecc437d421a4c7216caa0e23a36c869680418f55840c16a181443a091f85b3f407b8c318f9a6cc72682eece878975e03efe8ee7697c0e683e7f805d5f7a5e84cc987ca42059ca318c4a8ac0cada62e5e41a7fd7340a8208005901c0fcb9da3932037bfb9ffd2a00b316abe31b1bed8ee702a10a4a50f7c8e8dd9375c7c04271e632c8eeeb28906275753123f99efcc644b4ac14b55354fd3830e90de525d30232b321b31ee0c1389ba6ba1df982085db66166444e344f3b343d11403a65f6d360eea21c57496ab95577559cdbc30b82c7cba1899ccaa50a95a96dc2927f1dc03a8eb880be5c5ee9308fcb5bb0c6023e73366a9f16a1535d5a0013665c9e5400ead8b534c4d52eb728c328630589c50c7b0782bdf74fee6bc77ea8e2868634ab52d79488d62d3528ee399bcaa4ec731ec0acdcf52406e00fe7f610bc20f6dabe35bfe24afa15ea2cc9378b9dd4ed6a9162faa9b8bf51b5163a22a067016e690eba59436ca7333964cabe4d522f316f0ee759992846b4660b50752f58c77743bbd01070c50eb5be1071fb8d465f762bf11ff6a51040bf26dfa3aa0390f957c272f26e5bd5c05cbe83e1eb76dcac8a42ed5dbf6b6c373bca2cb3d98aa458941478169c6c347bd7d62b249cf3b6e7f62aa5acde74424c712dc18b46ec66e20213e0c1a1460ef5314c8987a18e6bd4378142fd83257b9b2739fd1d10489f24b0dec316e887dbba12e37c8a63d8de1e39ba57873491a385ba72a0ad4e9f23",
		Eta0:          "B92E64A5E1DD902815B6F9F030BC250049F9B1AA40346E483E7067118F8617CA",
		Spk:           int(129600),
		BlockBodyCbor: "81837907a861393030383238323538323063643037313962613566386139363738623434613035326537613733323237333331666166396236393337613437323538323136363936333663646633306533303038323538323063643037313962613566386139363738623434613035326537613733323237333331666166396236393337613437323538323136363936333663646633306533303130313834613330303538316437303930376539326636353234316561363730323963353463353335643036383035313138383634663331373032613038663538663136393964303138323161303031336139663261313538316335373935386230636165643566336237666439373139616332396330393030633862666431366437643834353964313735316430613464636131343736383631366536343663363537323031303238323031643831383538333364383739396664383739396630316666643837393966353831633537393538623063616564356633623766643937313961633239633039303063386266643136643764383435396431373531643061346463343736383631366536343663363537326666666661333030353831643730623339613435306437363631326362336136393062383263623034633661623733306238336461383639333764323737666638383737323230313832316130303163363932306131353831633762303066653163363166366665393062623335616432306165393635613563626334386433623838636566626666636166656462363461613135383230643831303364613930626237363032656135323030303064656266343934613730623230396563313064366466383433326333366636313766376538653133633031303238323031643831383538396564383739396664383739396634393330333132643633366637333664366637336438373939663032303366663162303030333864376561346336383030303162303030656437326636313436643365333031643837393966303030306666643837393966303031383634666664383739396664383739396630303030303030303431343066666438373939663966303130323033666630303030303034313430303066663030303064383739383066666666643837393966353831633762303066653163363166366665393062623335616432306165393635613563626334386433623838636566626666636166656462363461353832306438313033646139306262373630326561353230303030646562663439346137306232303965633130643664663834333263333666363137663765386531336366666666613330303538316437306364633033313630343365656565323734616636396238616532343962343065313633303233626534623938626632616533663462343038303138323161303031386139376161313538316337623030666531633631663666653930626233356164323061653936356135636263343864336238386365666266666361666564623634616131353832303263323261666433373866633765356430326137386361653431623039633161376432353630306333663536623934653663323735323938666564383835313530313032383230316438313835383635643837393966613164383739396630303138363466666438373939663162313761623038663561646665353234303431343064383739396634313430666666666438373939663538316337623030666531633631663666653930626233356164323061653936356135636263343864336238386365666266666361666564623634613538323032633232616664333738666337653564303261373863616534316230396331613764323536303063336635366239346536633237353239386665643838353135666666663832353831643630386633313066373966393737626466306265666564666165333337346136323565363463396136396134306333633866636136303764616331623030303030303034613033633837663730323161303030373234386130333161303235303334633930396131353831633762303066653163363166366665393062623335616432306165393635613563626334386433623838636566626666636166656462363461613235383230326332326166643337386663376535643032613738636165343162303963316137643235363030633366353662393465366332373532393866656438383531353031353832306438313033646139306262373630326561353230303030646562663439346137306232303965633130643664663834333263333666363137663765386531336330313062353832303734353861353564666434336537646432383634343934643038373738613035323262386666646166373337386662373336346463363137333233366631356530643831383235383230636430373139626135663861393637386234346130353265376137333232373333316661663962363933376134373235383231363639363336636466333065333031313038323538316436303866333130663739663937376264663062656665646661653333373461363235653634633961363961343063336338666361363037646163316230303030303030346130366530383463313131613030306162366366792306613330303831383235383230663830356336363362386531666634376461316634396564303266316130356239666630393037396331323934623934616238633639336534316565396638383538343034633230383138666461396131393432366435313065306330376532356433353431626261343335653734663765383534333166623333616537373565643539376130366135393364373565656336636530303665313961396637373635633165636539333965666230613563616536663837646235353265376265643830373035383238343030303064383739383038323161303030333939316531613035393438663237383430313030643837393966643837393966353831633537393538623063616564356633623766643937313961633239633039303063386266643136643764383435396431373531643061346463343736383631366536343663363537326666666638323161303030393438663531613064643961623131303638323539303439383539303439353031303030303333323332333233323332333233323332333232333232323233323332333233323533333330306333323332333233323332333233323332333233323533333330313633333030313030373330303933303134303131313332333235333333303162333031653030323135333333303138333330303330303133303062333031363031333133323332333235333333303162333337306539303030303030386139393938306461393939383064613939393830643939626166333030653330313930313633303065333031393030333135333333303162333337306536656234633033636330363463303363633036343030636364633031626164333030663330313933303066333031393031363438303038353238386230623061353131363135333333303162333233323533333330316433333730653930303031383065303030383939313931393239393938313031396261663030323333373461393030303139383132303032613565623830353238386231393239393938313031396238373438303030303034346338633934636363303934633061303030383463393236333031613030313136333032363030313330316530303231353333333032303333373065393030313030303861393939383131393830663030313061346332633263363033633030323630343630303236303336303032326336343634363630303230303230313434346136363630343430303232393830313033643837613830303031333233323332333235333333303233333337356530306530303432363665393532303030333330323730303134626437303039393830333030333030313938313230303139383131303031313831333030313138313230303039396261353438303030636330383064643438306332356562383063303338633036343035383532383862306230613530333031393031343330313030303133323533333330313933333730653930303231383063303030383938306631383062383030386231383065393830663138306631383062303030386230623138306530303039393139383030383030383032393132393939383064383030386135656238303463386339346363633036386364643739383037313830633030313138303731383063303035383939383066303031313938303230303230303038393938303230303230303039383066383031313830653830303862313131396238373333333232323332333233323533333330316433333730653930303130303038613430303032366562346330383863303663303038633036633030346339346363633037306364633361343030343030323239383130336438376138303030313332333233333030313030313030323232353333333032323030313134633130336438376138303030313332333233323332353333333032333333373165303134303034323636653935323030303333303237333735303030323937616530313333303036303036303033333735613630343830303636656238633038383030386330393830303863303930303034646435393831303938306430303131383064303030393931393830303830303830323131323939393830663830303861363130336438376138303030313332333233323332353333333032303333373165303130303034323636653935323030303333303234333734633030323937616530313333303036303036303033333735363630343230303636656238633037633030386330386330303863303834303034646435393830353138306138303131626165333030623330313530303133373563363031343630326130303239303031316261623330313930303133303139303032333735383630326530303236303265303032363032633030343630323830303236343634363436343634363436343634363436343634363436343634363436343634613636363033653636653164323030323330316530306531333233323332353333333032323333373065393030303138313038303038393938313331383061393831303138313339383130303030393938313331626137303066333330323633373465303138363630346336653938303131326635633032633634363630303230303230316534346136363630346330303232393831303364383761383030303133323332353333333032353333373565363033323630343630303430306132363665393532303030333330323930303234626437303039393830323030323030303938313530303131383134303030393831323830303938306538303730623162616233303233303031333032333030313330323230303133303231303031333032303030313330316630303133303165303031333031643030323337353836303336303032363033363030323630333430303436656230633036303030346330343030306363303538303034633035383030386330353030303463303330303163386330346363303530303034386330343830303435323631333635363332353333333030633333373065393030303030303861393939383037393830353030333061346332633261363636303138363665316432303032303031313533333330306633303061303036313439383538353863303238303134633030343031343863393463636330326363646333613430303030303232363436343634363461363636303234363032613030343236343634393331383034303031313932393939383038313962383734383030303030343463386339346363633035346330363030303835323631363337356136303263303032363031633030383263363031633030363263363032363030323630323630303436303232303032363031323030343263363031323030323436346136363630313436366531643230303030303131333233323332333235333333303131333031343030323134393835386464373138303930303039383039303031316261653330313030303133303038303032313633303038303031333735633030323436303061366561383030343863303063646435303030616239613535373361616165373935356366616261303537343261653839333030313165353831633762303066653163363166366665393062623335616432306165393635613563626334386433623838636566626666636166656462363461303030313539306332633539306332393031303030303333333233323332333233323332333233323332323332323332323233323332353333333030623332353333333030633333373065393030303030303839393139313931393139313931393139313931393139313931393139313931393139313931393139313931393139313931393139313931393139313932393939383135313962383734383030306330613430303434633863386338633863386338633863386338633863386338633863386338633863386339346363633066306364633361343030303630373630303232363436343634613636363037653636653164323030303330336530303131333233323332353333333034323333373565303034393831303364383739383030303133323332333233323332333235333333303438333330323430313530303131333233323533333330346433303530303032313332333233323332333233323332353333333035313333303264303165303031313533333330353133323332333233323533333330353535333333303535333333303535333337316536303838363038343665623863306530633134633030643232313030346130393434353463636331353463646334393832333162616533303338333035333030333438313930346339346363633135386364633361343030303630616130303232363436343634613636363062323636653164323030303330353830303131333233323533333330356235333333303562333333303435333034303330353930303932323333373132303032303034303038323636363038613630383036306232303132343436366532343030383030343030343532383061393939383264393962383834383030306464363938323039383263383034386139393938326439396238383438303030646436393832333138326338303438613939393832643939623838343830303064643639383330313833303938333039383330393833303938326338303438613939393832643939623838343830303064643639383230313832633938316539383263383034386139393938326439396238383337356136303832363062323031323665623463313138633136343032343532383862306230623062306230623138326638303039383262383030386231393832306134303034393030313138326530303039383261303030386231393831663234303038393030333062306230613939393832613939626166303031303065313461323263326336306232303032363062323030343630616530303236303965303065323634363461363636306163363062323030343236343634613636363061613634363436343634613636363062323636656263303034303234353463636331363463646333393832303030316134303034323634613636363062343636653164323030303330353930303131333234613236306230303032326336363037343030363031613263326336306261303032363062613030343665616363313663303034633134633030383463386339346363633135636364643739393931323939393832633939393832633939323939393832643139623837333735613630376136306230303032393030303039396238373337356136303765363062303030323930303030613530333035653330356633303566333035663330356633303566333035373030323461303934343533303031303364383761383030303133323533333330356133333730653930303130303038613631303364383762383030303133323332353333333035633333373132363665303064643639383166393832643030303962616433303432333035613030353030343134633130336438376238303030313463313033643837393830303033303630303031333035383030353330353830303433303361333035353030643333373034303032393034303434626432363031303364383739383030303134613232633634613636363061653636653164323030323330353833373534363037383630616130303232363461363636306230363665316432303032333035373030313133373561363062613630616330303232633630373436306161303032326336303736363061383033653636303663366561636330653063313463303038303234353863393463636331353463646333613430303030303232363436343634363461363636306238363062653030343236343634393331383238383031313938323538303139313931393139313932393939383266313962383734383030303030343463386338633863386338633934636363313963633161383030383463393236333235333333303635333337306539303030303030383939313932393939383335313833363830313061346332633665623863316163303034633138633030383538633138633030343538633161303030346331613030303864643731383333303030393833333030313162616433303634303031333035633030333136333035633030323330343830303233303564303032333035623030313136333035643030313330356430303233373536363062363030323630613630303432633630613630303236303636303032326336306165303032363630353830343230393632633263363665393532303030333330353433373532303461363630613836656134303035326635633036303561363630353836363035383636303538363630353836363035383636303538366562386330633863313334313038646437313831613138323638323130303532343530663633366636653733363536653733373537333566373337343631373436353030303032343839303132643030303031333032643337353036366530636464363938313939383236303031323431393030323630353836303630363039363030323630356336303934363035653630393430303436346136363630393836366531643230303030303131333233323332333235333333303533333035363030323133323332343938633132303030386339346363633134346364633361343030303030323236343634363436343634363436343634363436343634363436343634363436346136363630633836306365303034323634363436343634393331393239393938333239396238373438303030303034346338633863386338633863386338633863386339346363633163386331643430303834633863393236333235333333303731333337306539303030303030383939313931393139313931393139313931393139313931393239393938343030303938343138303830313039393234633636306465303136343665623430303435386464363938343038303830303938343038303830313162616533303766303031333037663030323337356136306661303032363066613030343665623463316563303034633165633030386464363938336338303039383363383031316261633330373730303133303666303039313633303666303038333235333333303730333337306539303030303030383939313931393139313931393139313931393139323939393833653938343030303830313061346332633665623863316638303034633166383030386464363938336530303039383365303031316261643330376130303133303761303032333735613630663030303236306630303034366562346331643830303463316238303238353863316238303234353863646333613430303436306465366561386331636330303463316363303038646436393833383830303938333838303131626164333036663030313330366630303233303664303031333036643030323330366230303133303633303035313633303633303034333034663030353330346530303633323533333330363233333730653930303030303038393931393139313932393939383334393833363030313061346332633665623463316138303034633161383030386464363938333430303039383330303037306231383330303036386231383332383030393833323830313138333138303039383331383031313833303830303938333038303131626164333035663030313330356630303233373561363062613030323630626130303436656234633136633030346331366330303863313634303034633136343030386464373138326238303039383237383032306231383237383031386231383261303030393832613030313138323930303039383235303031306231383235303030393831353030303862313832373030303939383131383063303232306231396261353438303030636331326364643438306531393832353962613930303134626437303138313231393831313939383131393938313139626165333032393330343430333933373563363035363630383830373239313031306436333663363936353665373435663230373337343631373436353030303031333032343330323833303433333032383330343330303233323533333330343533333730653930303030303038393931393139313932393939383236313832373830313039393139323463363038323030343634613636363039343636653164323030303030313133323332353333333034663330353230303231343938353864643639383238303030393832343030323062313832343030313862313832363830303938323638303131383235383030393832313830313062313832313830303938313138303039383133393832303030323862313932393939383231313962383734383030303030343534636363313134633130303030383532363136313533333330343233333730653930303130303038613939393832323938323030303130613463326332633630383030303236303861303032363037613030323263363630336530303836366539353230303233333034323330323133303363303031346264373031383231303030393831643030303862313931393830303830303830373931323939393832303030303861363031303364383761383030303133323332353333333033663333373065363636303436366561636330393063306634633039306330663430303864643731383131313831653831393162616533303234333033643033323438303038346364643261343030303636303836303034393761653031333330303430303430303133303434303032333034323030313337353636303765303032363037653030323630376330303436303738303032363037383030323630373630303236303734303034366561636330653030303463306530303034633064633030386464363138316138303039383161383030393831613030313162616333303332303031333032613030353337356336303630303032363035303030323263363035633030323630356330303436303538303032363034383033633434363436363030323030323030363434613636363035383030323239376165303133323332353333333032623332333235333333303264333337306539303031303030383939623866303037333735633630363436303536303034323934306330616330303463303338633061346330333863306134303038346363306263303038636330313030313030303434636330313030313030303463306330303038633062383030343838636463333939393830353139313938303038303038303139313239393938313538303038613565623762646231383034633863386338633934636363306230636463376134343130303030323130303331333330333033333736303665613430303864643330303039393830333030333030313962616233303264303033333735633630353630303436303565303034363035613030323665623863303234633039303030346464373138303539383132303030613430303434343636653238303038303034386463613030303931626233303031323332353333333032323333373065393030323138313038303038393831333938313030303038623138303339383066383030393131393139383030383030383031393132393939383133303030386136313033643837613830303031333233323332333235333333303237333337356530306530303432363665393532303030333330326230303134626437303039393830333030333030313938313430303139383133303031313831353030313138313430303039313831323138313239383132393831323938313239383132393831323830303931383131383030393131313931393139323939393831313139623837343830303830303435323030303133373561363034653630343030303436303430303032363461363636303432363665316432303032303031313463313033643837613830303031333233323333303031303031303032323235333333303237303031313463313033643837613830303031333233323332333235333333303238333337316530313430303432363665393532303030333330326333373530303032393761653031333330303630303630303333373561363035323030363665623863303963303038633061633030386330613430303464643539383133313830663830313138306638303039393139383030383030383032313132393939383132303030386136313033643837613830303031333233323332333235333333303235333337316530313030303432363665393532303030333330323933373463303032393761653031333330303630303630303333373536363034633030363665623863303930303038633061303030386330393830303438633038346330383830303438633038306330383463303834303034633030343030343839346363633037343030343532303030313333373030393030313139383031303031313831303030303931323939393830633939623837303031343830303035333030313033643837613830303031353333333031393333373130303032393030303039396261353438303030636330373463646432613430303036363033613665613063646330613430303030303436363033613665613063646330613430303030303239376165303462643730303939626135343830303063633037346364643261343030303636303361366561303030386363303734646434303030613565623831326635633034343436343634363436343634363630306536366530383031306464363938313139383132303030393962383233373561363034363030323030343630333630306136656234633038343030346330383430303864643639383066383030393830623830313931383064393830653138306531383065303030393139323939393830623139623837343830303030303434633863386338633934636363303734633038303030383532363136333735613630336330303236303363303034366562346330373030303463303530303038353863303530303034633030343030343839346363633035306364633738303061343431303031343839303031333235333333303135333337306539303230303030383939383031383031393939623863343830303863646330396238643030323438303038303038343030386364633730303061343030303630303230303234346136363630323436366533633030353232313030313438393030313332333235333333303134333337306539303230303030383939383032303032313939623863343830303063646330383031323430303430303632303036363665333830303863646330383030613430303436303036303032343665333430303438386338636330303430303430306338393463636330353430303435323631333233333030333030333330313930303233303033333031373030313330313230303133303061303035313461303630313430303832393330396232623139323939393830353939623837343830303030303434633863393463636330343063303463303038346339323633303034303031313633303131303031333030393030343135333333303062333337306539303031303030386139393938303731383034383032306134633263326336303132303036343634613636363031363636653164323030303030313133323332333233323533333330313233303135303032313439383538646437313830393830303938303938303131626165333031313030313330303930303231363330303930303133373563303032366562383030343863303134646435303030393138303139626161303031353733346161653735353563663261623966353734306165383535643132363031316535383163623339613435306437363631326362336136393062383263623034633661623733306238336461383639333764323737666638383737323230303463303131653538316363646330333136303433656565653237346166363962386165323439623430653136333032336265346239386266326165336634623430383030303160",
	}
	vOutput := cardano.VerifyBlock(blockInput)
	// fmt.Printf("%v", vOutput)

	if len(vOutput) == 0 {
		fmt.Printf("error")
	}
	vOutputObj := unpackVerifyBlockOutput(vOutput)

	if !vOutputObj.IsValid {
		fmt.Printf("error")
	} else {
		temp, _ := json.Marshal(vOutputObj)
		fmt.Printf("ok: %v", string(temp))
	}
}
